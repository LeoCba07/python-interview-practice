<!DOCTYPE html>
<html>
<head>
    <title>Chart.js Practice</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <canvas id="myChart" width="400" height="200"></canvas>

    <script>
        // Goal: Fetch todos from API, count completed vs incomplete per user, plot as bar chart

        async function fetchAndPlot() {
            // 1. Fetch the todos
            const response = await fetch('https://jsonplaceholder.typicode.com/todos');
            const todos = await response.json();

            let counts = {}
            // 2. Count completed todos per user (users 1-10)
            // You need to build two arrays:
            todos.forEach(todo => {
              const userId = todo.userId;

              if (!counts[userId]) {
                counts[userId] = 0;
              }

              if (todo.completed) {
                counts[userId] += 1;
              }
            });


            const labels = [];
            const completedCounts = [];

            for (let userId = 1; userId <= 10; userId++) {
              labels.push(`User ${userId}`);
              completedCounts.push(counts[userId]);
            }

            const ctx = document.getElementById('myChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Completed Todos',
                        data: completedCounts,
                        backgroundColor: 'green'
                    }]
                }
            });
        }

        fetchAndPlot();
    </script>
</body>
</html>
